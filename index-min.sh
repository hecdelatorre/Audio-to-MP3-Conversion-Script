#!/bin/bash
read -p "Enter the directory path: " d;[ ! -d "$d" ]&&{ echo "Directory does not exist. Aborting.";exit 1;};cd "$d"||exit 1;af=();c=1;for f in *.{wav,flac,ogg,opus,m4a};do [ -f "$f" ]&&[ "${f##*.}" != "mp3" ]&&{ echo "$c. $f";af+=("$f");((c++));};done;[ ${#af[@]} -eq 0 ]&&{ echo "No suitable audio files found. Aborting.";exit 1;};read -p "Do you want to continue and convert these files? (y/n): " r;[ "$r" != "y" ]&&{ echo "Aborting.";exit 1;};echo "Converting files to mp3...";tf=${#af[@]};fr=$tf;for f in "${af[@]}";do of="${f%.*}.mp3";echo -n "Converting $f... ";ffmpeg -i "$f" -b:a 192K "$of" >/dev/null 2>&1;if [ $? -eq 0 ];then echo "Done";rm "$f";else echo "Failed";fi;((fr--));echo "Files remaining: $fr of $tf";done;echo "Conversion completed. Original files have been deleted.";exit 0
